<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - Post</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

  <div class="bg-white shadow-lg rounded-2xl p-8 w-full max-w-lg">
    <h1 class="text-2xl font-bold text-purple-600 mb-6 text-center">‚úçÔ∏è Create New Post</h1>

    <!-- Post Form -->
    <!-- ‚úÖ REPLACE your existing post form with this -->
<div class="bg-white shadow-lg rounded-2xl p-8 w-full max-w-lg mx-auto">
  <h1 class="text-2xl font-bold text-purple-600 mb-6 text-center">‚úçÔ∏è Create New Post</h1>

  <form id="postForm" class="space-y-5">
    <!-- Title -->
    <div>
      <label for="title" class="block text-sm font-medium text-gray-700">Post Title</label>
      <input type="text" id="title"
        class="w-full mt-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500"
        placeholder="Enter your post title" required />
    </div>

    <!-- Content -->
    <div>
      <label for="content" class="block text-sm font-medium text-gray-700">Post Content</label>
      <textarea id="content" rows="5"
        class="w-full mt-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500"
        placeholder="Write your post content..." required></textarea>
    </div>

    <!-- Submit Button -->
    <button type="submit"
      class="w-full py-3 bg-purple-600 text-white rounded-xl font-semibold shadow-md hover:bg-purple-700 transition-all">
      üöÄ Publish Post
    </button>
  </form>
</div>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

  // ‚úÖ Your Firebase Config (replace with your actual config)
  const firebaseConfig = {
    apiKey: "AIzaSyCraXq51qucrTWJlD7ZXjUodP92Aqxfh3c",
    authDomain: "munyaotech-lab.firebaseapp.com",
    projectId: "munyaotech-lab",
    storageBucket: "munyaotech-lab.appspot.com",
    messagingSenderId: "654834051986",
    appId: "1:654834051986:web:076f2f5c10cae1291baf4b"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ‚úÖ Handle form submit
  document.getElementById("postForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const title = document.getElementById("title").value;
    const content = document.getElementById("content").value;

    try {
      await addDoc(collection(db, "posts"), {
        title: title,
        content: content,
        timestamp: serverTimestamp()
      });

      // Simple styled success message
      alert("‚úÖ Post added successfully!");
      document.getElementById("postForm").reset();
    } catch (err) {
      console.error("‚ùå Error adding post:", err);
      alert("‚ùå Error: " + err.message);
    }
  });
  // ‚úÖ Toast Function
function showToast(message, type = "success") {
  const toastContainer = document.getElementById("toastContainer");

  const toast = document.createElement("div");
  toast.className = `px-4 py-3 rounded-lg shadow-md text-white flex items-center justify-between transition-all duration-500
    ${type === "success" ? "bg-green-500" : "bg-red-500"}`;

  toast.innerHTML = `
    <span>${message}</span>
    <button class="ml-3 text-white font-bold focus:outline-none">‚úñ</button>
  `;

  // Remove toast on button click
  toast.querySelector("button").addEventListener("click", () => {
    toast.remove();
  });

  // Auto-remove after 4 seconds
  setTimeout(() => {
    toast.remove();
  }, 4000);

  toastContainer.appendChild(toast);
}
// ‚úÖ Import Firebase SDK
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

// ‚úÖ Your Firebase config (replace with your real config)
const firebaseConfig = {
  apiKey: "AIzaSyCraXq51qucrTWJlD7ZXjUodP92Aqxfh3c",
  authDomain: "munyaotech-lab.firebaseapp.com",
  projectId: "munyaotech-lab",
  storageBucket: "munyaotech-lab.appspot.com",
  messagingSenderId: "654834051986",
  appId: "1:654834051986:web:076f2f5c10cae1291baf4b"
};
// ‚úÖ Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
document.getElementById("postForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  setLoading(true);

  const title = document.getElementById("title").value.trim();
  const content = document.getElementById("content").value.trim();

  try {
    await addDoc(collection(db, "posts"), {
      title: title,
      content: content,
      timestamp: serverTimestamp()
    });

    showToast("‚úÖ Post added successfully!", "success");
    document.getElementById("postForm").reset();
  } catch (err) {
    console.error("‚ùå Error adding post:", err);
    showToast("‚ùå Error: " + err.message, "error");
  } finally {
    setLoading(false);
  }
});
// ‚úÖ Realtime Listener for Posts
const postsList = document.getElementById("postsList");

const q = query(collection(db, "posts"), orderBy("timestamp", "desc"));
onSnapshot(q, (snapshot) => {
  postsList.innerHTML = ""; // clear old list
  snapshot.forEach((doc) => {
    const post = doc.data();
    const postEl = document.createElement("div");

    postEl.className = "p-4 bg-gray-800 rounded-lg shadow-md mb-4";
    postEl.innerHTML = `
      <h3 class="text-xl font-bold text-purple-400">${post.title}</h3>
      <p class="text-gray-300 mt-2">${post.content}</p>
      <small class="text-gray-500">üìÖ ${post.timestamp?.toDate().toLocaleString() || "Just now"}</small>
    `;

    postsList.appendChild(postEl);
  });
});

</script>
<h2 class="text-2xl font-semibold text-white mt-6 mb-3">All Posts</h2>
<div id="postsList" class="space-y-4"></div>

<!-- ‚úÖ ADD this before </body> -->
<div id="toastContainer" class="fixed bottom-5 right-5 space-y-3 z-50"></div>
</body>
</html>
